!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e,n){"use strict";var r,i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Fragment="FRAGMENT",t.Vertex="VERTEX"}(r=e.ShaderTypes||(e.ShaderTypes={}));var o=function(t,e,n){this.location=t,this.type=e,this.size=n},a=function(){function t(e,n,a,u){var s=this;for(var c in this.gl=e,this.vertexSource=n,this.fragmentSource=a,this.attributes=u,this.uniformLocations={},this.bindAttributes=function(){for(var t in s.attributes){var e=s.attributes[t];s.gl.enableVertexAttribArray(e.location),s.gl.bindBuffer(s.gl.ARRAY_BUFFER,e.buffer),s.gl.vertexAttribPointer(e.location,e.vertexAttributeMetadata.dimension,e.vertexAttributeMetadata.type,e.vertexAttributeMetadata.normalize,e.vertexAttributeMetadata.stride,e.vertexAttributeMetadata.offset)}},this.setUniform=function(e){for(var n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!s.uniformLocations[e])throw new Error("Uniform '"+e+"' not referenced in source program");var a=s.uniformLocations[e],u=a.location,c=a.type;(n=s.gl)[t.typeToLocationMap[c]].apply(n,i([u],r))},this.useProgram=function(){return s.gl.useProgram(s.program)},this.drawUsingAttribute=function(t,e,n){void 0===e&&(e=s.gl.TRIANGLES),void 0===n&&(n=0);var r=s.attributes[t];s.bindAttributes(),s.gl.drawArrays(e,n,r.data.length/r.vertexAttributeMetadata.dimension)},this.compileShader=function(t,e){var n=s.gl,i=n.createShader(e===r.Fragment?n.FRAGMENT_SHADER:n.VERTEX_SHADER);if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){var o=new Error(n.getShaderInfoLog(i));throw n.deleteShader(i),o}return i},this.initShaderProgram=function(t,e){var n=s.gl,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){var i=new Error(n.getProgramInfoLog(r));throw n.deleteProgram(r),i}return r},t.typeToLocationMap||t.setTypeToLocationMap(e),this.vertexShader=this.compileShader(n,r.Vertex),this.fragmentShader=this.compileShader(a,r.Fragment),this.program=this.initShaderProgram(this.vertexShader,this.fragmentShader),u){var d=this.gl.getAttribLocation(this.program,c);u[c].location=d}for(var f=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS),h=0;h<f;h++){var l=e.getActiveUniform(this.program,h),v=l.name,m=l.type,g=l.size,p=this.gl.getUniformLocation(this.program,v);this.uniformLocations[v]=new o(p,m,g)}}return t.setTypeToLocationMap=function(e){var n;t.typeToLocationMap=((n={})[e.FLOAT]="uniform1f",n[e.FLOAT_VEC2]="uniform2f",n[e.FLOAT_VEC3]="uniform3f",n[e.SAMPLER_2D]="uniform1i",n)},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n,r){var i=n.dimension,o=n.type,a=void 0===o?t.FLOAT:o,u=n.normalize,s=void 0!==u&&u,c=n.stride,d=void 0===c?0:c,f=n.offset,h=void 0===f?0:f;void 0===r&&(r=t.STATIC_DRAW),this.data=e,this.location=null;var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,e,r),this.buffer=l,this.vertexAttributeMetadata={dimension:i,type:a,normalize:s,stride:d,offset:h}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={get:function(){return this[0]},set:function(t){return this[0]=t,t}},i={get:function(){return this[1]},set:function(t){return this[1]=t,t}};Array.prototype.x||(Object.defineProperty(Array.prototype,"x",r),Object.defineProperty(Array.prototype,"y",i)),e.v2=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),[t,e]},e.ZERO=e.v2(),e.distance=function(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.distanceSquared=function(t,e){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)},e.magnitude=function(t){return e.distance(t,e.ZERO)},e.ccw=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},e.angle2=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},e.angle3=function(t,e,n){return Math.atan2(t.y-e.y,t.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x)},e.piNum=Math.PI/180,e.numPi=180/Math.PI,e.degToRad=function(t){return t*e.piNum},e.radToDeg=function(t){return t*e.numPi},e.dot=function(t,e){return t.x*e.x+t.y*e.y},e.sum=function(t,n){return e.v2(t.x+n.x,t.y+n.y)},e.sub=function(t,n){return e.v2(t.x-n.x,t.y-n.y)},e.mult=function(t,n){return e.v2(t.x*n.x,t.y*n.y)},e.divide=function(t,n){return e.v2(t.x/n.x,t.y/n.y)},e.unit=function(t){var n=e.distance(e.ZERO,t);return e.v2(t.x/n,t.y/n)},e.normal=function(t,n){var r=n.x-t.x,i=n.y-t.y;return e.v2(-i,r)},e.orthogonal=function(t){return e.v2(-t.y,t.x)},e.scalarMultiply=function(t,n){return e.v2(t.x*n,t.y*n)},e.scalarSum=function(t,n){return e.v2(t.x+n,t.y+n)}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=0,a=-1/0,u=function(){function t(){this.textureSource=o++,this.loaded=!0}return Object.defineProperty(t.prototype,"textureUnit",{get:function(){return this.textureSource%a},enumerable:!0,configurable:!0}),t.prototype.setTexture=function(t){if(a<0&&(a=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),!this.loaded)throw new Error("Attempted to bind image to texture before it loads. Make sure the image is loaded by the time you call bindTexture");var e=t.createTexture();return this._texture=e,this.bindTexture(t),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.texture),e},t.prototype.bindTexture=function(t){t.activeTexture(t.TEXTURE0+this.textureUnit),t.bindTexture(t.TEXTURE_2D,this._texture)},t.prototype.delete=function(t){t.deleteTexture(this._texture),this.loaded=!1},t}();e.default=u;var s=function(t){function e(e){var n=t.call(this)||this;return n.texture=e.canvas,n.height=e.canvas.height,n.width=e.canvas.width,n}return i(e,t),e.prototype.rebindTexture=function(t){this.bindTexture(t),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.texture)},e}(u);e.CanvasTexture=s;var c=function(t){function e(e){var n=t.call(this)||this;n.source=e,n.loaded=!1;var r=new Image;return r.src=e,n.width=r.width,n.height=r.height,r.onload=function(){n.loaded=!0,n.width=r.width,n.height=r.height},n.texture=r,n}return i(e,t),e}(u);e.ImageTexture=c},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=function(t,e){var n=this;this.element=t,this.settings=e,this.mouse=i.v2(),this.mouseButtons=Array(),this.keys=new Set,this.touches=[],this.updateTouches=function(t){t.preventDefault(),n.touches=r(t.touches).map((function(t){return i.v2(t.pageX,t.pageY)}))},this.render=function(){n.draw(n.gl,n),window.requestAnimationFrame(n.render)},this.start=function(){n.init(n.gl,n),n.RAF=requestAnimationFrame(n.render)},this.draw=function(t,e){},this.init=function(t,e){},this.onResize=function(t,e){},this.onClick=function(t,e){},this.onMouseDown=function(t,e){},this.onMouseUp=function(t,e){},this.onKeyDown=function(t,e,n){},this.onKeyUp=function(t,e,n){},this.setCanvasDimensions=function(t,e){var r=n.element;r.width=t,r.height=e,r.style.width=String(t),r.style.height=String(e)},this.setCanvasSize=function(t){t.fullscreen&&(t.width=window.innerWidth,t.height=window.innerHeight),n.setCanvasDimensions(t.width,t.height)},this.setCanvasSize(e);var o=this.gl=this.element.getContext("webgl");if(o||(o=this.gl=this.element.getContext("experimental-webgl")),!o)throw new Error("Could not find webgl context");window.addEventListener("resize",(function(){n.setCanvasSize(e),o.viewport(0,0,e.width,e.height),n.onResize(o,n)})),t.addEventListener("mousemove",(function(t){t.offsetX&&(n.mouse.x=t.offsetX,n.mouse.y=t.offsetY)})),t.addEventListener("mousedown",(function(t){n.mouseButtons[t.button]=!0,n.onMouseDown(o,n)})),t.addEventListener("mouseup",(function(t){n.mouseButtons[t.button]=!1,n.onMouseUp(o,n)})),t.addEventListener("mouseleave",(function(t){n.mouseButtons=Array(),n.onMouseUp(o,n)})),t.addEventListener("click",(function(t){n.onClick(o,n)})),t.addEventListener("touchstart",(function(t){n.updateTouches(t);for(var e=0;e<t.changedTouches.length;e++){var r=t.changedTouches[e];0===e&&(n.mouse.x=r.pageX,n.mouse.y=r.pageY)}n.onMouseDown(o,n)})),t.addEventListener("touchend",(function(t){n.updateTouches(t);for(var e=0;e<t.changedTouches.length;e++){var r=t.changedTouches[e];0===e&&(n.mouse.x=r.pageX,n.mouse.y=r.pageY)}n.onMouseUp(o,n),n.onClick(o,n)})),t.addEventListener("touchmove",(function(t){n.updateTouches(t);for(var e=0;e<t.changedTouches.length;e++){var r=t.changedTouches[e];0===e&&(n.mouse.x=r.pageX,n.mouse.y=r.pageY)}})),t.addEventListener("keydown",(function(t){t.preventDefault();var e=t.keyCode;n.keys.add(e),n.onKeyDown(n.gl,n,e)})),t.addEventListener("keyup",(function(t){t.preventDefault();var e=t.keyCode;n.keys.delete(e),n.onKeyUp(n.gl,n,e)})),t.addEventListener("contextmenu",(function(t){return t.preventDefault()})),t.addEventListener("dragenter",(function(t){return t.preventDefault()}))};e.default=o},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeOffscreenCanvas=function(t,e){var n=document.createElement("canvas").getContext("2d");return n.canvas.width=t,n.canvas.height=e,n}},,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var r=n(2),i=n(4),o=n(0),a=n(1),u=n(3),s=n(9),c=n(21),d=n(22),f=n(23),h="",l=0;l<26;l++)h+=String.fromCharCode(65+l);var v,m=s.makeOffscreenCanvas(200,100),g=function(t){var e=Array(Math.floor(20*Math.random()+5)).fill(0).map((function(t){return h[Math.floor(Math.random()*h.length)]})).join("")+": "+t;m.font="14px sans-serif";var n=m.measureText(e).width;m.canvas.width=n,m.clearRect(0,0,Math.ceil(m.canvas.width),Math.ceil(m.canvas.height)),m.fillStyle="rgba(0, "+(156*Math.random()+100|0)+", "+(156*Math.random()+100|0)+", 0.6)",m.fillRect(0,0,Math.ceil(m.canvas.width),Math.ceil(m.canvas.height)),m.fillStyle="red",m.font="14px sans-serif",m.fillText(e,0,14);var i=new u.CanvasTexture(m);return new p(i,r.v2(Math.random(),Math.random()),e)},p=function(t,e,n){void 0===n&&(n="hi"),this.texture=t,this.position=e,this.id=n},x=[];window.onload=function(){var t=new i.default(document.getElementById("webgl"),{fullscreen:!0});window.textureEntities=x,t.init=function(t){for(var e=0;e<20;e++){var n=g(e);n.texture.setTexture(t),x.push(n)}v=new o.default(t,d,c,{aPosition:new a.default(t,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),{dimension:2}),aTextcoord:new a.default(t,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),{dimension:2})})};var e=-1,n=r.v2(0,0);t.onMouseDown=function(i,o){for(var a=r.v2(t.settings.width,t.settings.height),u=x.length-1;u>=0;u--){var s=x[u],c=r.mult(s.position,a),d=new f.default(c,r.sum(c,r.v2(s.texture.width,s.texture.height))),h=new f.default(t.mouse,r.sum(t.mouse,r.v2(-2,-2)));if(d.intersectsBox(h)){e=u,n=t.mouse.slice();break}}},t.onMouseUp=function(i,o){if(e>-1){var a=r.v2(t.settings.width,t.settings.height),u=r.divide(r.sub(t.mouse,n),a);x[e].position=r.sum(x[e].position,u),e=-1}},t.draw=function(t,i){t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);for(var o=r.v2(i.settings.width,i.settings.height),a=r.divide(r.sub(i.mouse,n),o),u=0;u<x.length;u++){var s=x[u];if(s.texture.bindTexture(t),v.useProgram(),v.setUniform("uImage",s.texture.textureUnit),v.setUniform("uScale",s.texture.width/i.settings.width,s.texture.height/i.settings.height),e===u){var c=r.sum(s.position,a);v.setUniform("uTranslation",c.x,c.y)}else v.setUniform("uTranslation",s.position.x,s.position.y);v.drawUsingAttribute("aPosition")}},t.start()}},function(t,e){t.exports="precision mediump float;\nvarying vec2 vTextcoord;\nuniform sampler2D uImage;\n\nvoid main () {\n  gl_FragColor = texture2D(uImage, vTextcoord);\n}\n"},function(t,e){t.exports="precision mediump float;\nattribute vec2 aPosition;\nattribute vec2 aTextcoord;\nuniform vec2 uTranslation;\nuniform vec2 uScale;\nvarying vec2 vTextcoord;\n\nvoid main () {\n  vTextcoord = aTextcoord;\n  vec2 scaledPosition = aPosition * uScale;\n  vec2 translatedPosition = scaledPosition + uTranslation;\n  vec2 clipspacePosition = (translatedPosition * 2.0 - 1.0) * vec2(1, -1);\n  gl_Position = vec4(clipspacePosition, 0, 1);\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.min=t,this.max=e}return t.prototype.intersectsBox=function(t){return!(this.max[0]<t.min[0]||this.min[0]>t.max[0]||this.max[1]<t.min[1]||this.min[1]>t.max[1])},t}();e.default=r}]);